# Интерфейс управления персоналом

## Описание

Модуль управления персоналом позволяет вести учёт служащих гостиницы.

## Список служащих

**Путь:** `/staff`

**Компонент:** `StaffView.vue`

### Функционал

- Таблица служащих с пагинацией
- Поиск по ФИО
- Фильтр по статусу (все/работающие/уволенные)
- Приём на работу
- Увольнение
- Редактирование и удаление

### Колонки таблицы

| Колонка | Описание |
|---------|----------|
| ФИО | Полное имя служащего |
| Дата приёма | Дата приёма на работу |
| Дата увольнения | Дата увольнения (если уволен) |
| Статус | Работает/Уволен |
| Действия | Кнопки управления |

### Фильтры

- **Поиск** — по ФИО
- **Статус** — все / работающие / уволенные

## Форма приёма на работу

### Поля

| Поле | Тип | Валидация |
|------|-----|-----------|
| Фамилия | text | Обязательное |
| Имя | text | Обязательное |
| Отчество | text | Необязательное |
| Дата приёма | date | Обязательное |

## Диалог увольнения

При увольнении указывается:
- ФИО служащего (информационно)
- Дата увольнения (по умолчанию сегодня)

После увольнения служащий помечается как неактивный (`is_active = false`).

## API endpoints

### Получение списка

```
GET /api/staff/
GET /api/staff/?search=Петров
GET /api/staff/?ordering=hire_date
```

### Активные служащие

```
GET /api/staff/active/

Response:
{
  "count": 10,
  "staff": [...]
}
```

### Приём на работу

```
POST /api/staff/hire/
Authorization: Token xxx

{
  "last_name": "Сидорова",
  "first_name": "Анна",
  "middle_name": "Петровна",
  "hire_date": "2024-01-15"
}
```

### Увольнение

```
PATCH /api/staff/{id}/fire/
Authorization: Token xxx

{
  "fire_date": "2024-06-30"
}
```

### Создание

```
POST /api/staff/
Authorization: Token xxx

{
  "last_name": "Сидорова",
  "first_name": "Анна",
  "hire_date": "2024-01-15"
}
```

### Обновление

```
PUT /api/staff/{id}/
Authorization: Token xxx

{
  "last_name": "Сидорова",
  "first_name": "Анна",
  "middle_name": "Петровна",
  "hire_date": "2024-01-15"
}
```

### Удаление

```
DELETE /api/staff/{id}/
Authorization: Token xxx
```

## Модель данных

```javascript
{
  id: 1,
  last_name: "Сидорова",
  first_name: "Анна",
  middle_name: "Петровна",
  full_name: "Сидорова Анна Петровна",
  hire_date: "2024-01-15",
  fire_date: null,
  is_active: true
}
```

## Пример использования

```javascript
import { staffAPI } from '@/api'

// Получение активных служащих
const response = await staffAPI.getActive()
const activeStaff = response.data.staff

// Приём на работу
await staffAPI.hire({
  last_name: 'Сидорова',
  first_name: 'Анна',
  hire_date: '2024-01-15'
})

// Увольнение
await staffAPI.fire(staffId, {
  fire_date: '2024-06-30'
})
```

## Связь с расписаниями

Служащие связаны с расписаниями уборки. При создании расписания выбирается активный служащий из выпадающего списка.

После увольнения служащего его расписания автоматически исключаются из выборок (фильтруются по `staff__is_active=True`).
