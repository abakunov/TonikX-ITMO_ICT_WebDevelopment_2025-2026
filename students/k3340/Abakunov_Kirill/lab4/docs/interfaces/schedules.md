# Интерфейс расписаний уборки

## Описание

Модуль расписаний уборки позволяет управлять графиком уборки номеров по этажам и дням недели.

## Страница расписаний

**Путь:** `/schedules`

**Компонент:** `SchedulesView.vue`

### Функционал

- Визуализация расписания по дням недели
- Фильтрация по этажу
- Фильтрация по дню недели
- Создание, редактирование и удаление расписаний

### Отображение

Расписание отображается в виде 7 карточек (по одной на каждый день недели):

```
┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│ Понедельник  │ │   Вторник    │ │    Среда     │
├──────────────┤ ├──────────────┤ ├──────────────┤
│ 1 Иванова    │ │ 2 Петрова    │ │ 1 Иванова    │
│ 2 Петрова    │ │ 3 Сидоров    │ │ 3 Сидоров    │
│ 3 Сидоров    │ │              │ │              │
└──────────────┘ └──────────────┘ └──────────────┘
```

Каждая запись показывает:
- Номер этажа (в кружке)
- ФИО служащего

### Фильтры

| Фильтр | Тип | Описание |
|--------|-----|----------|
| Этаж | select | 1-10 |
| День недели | select | Пн-Вс |

## Форма создания/редактирования

### Поля

| Поле | Тип | Валидация |
|------|-----|-----------|
| Служащий | select | Обязательное, только активные |
| Этаж | number | Обязательное, >= 1 |
| День недели | select | Обязательное |

### Дни недели

```javascript
const weekdays = [
  { value: 1, text: 'Понедельник' },
  { value: 2, text: 'Вторник' },
  { value: 3, text: 'Среда' },
  { value: 4, text: 'Четверг' },
  { value: 5, text: 'Пятница' },
  { value: 6, text: 'Суббота' },
  { value: 7, text: 'Воскресенье' },
]
```

### Ограничение уникальности

Комбинация `(служащий, этаж, день_недели)` должна быть уникальной. При попытке создать дубликат будет показана ошибка.

## API endpoints

### Получение списка

```
GET /api/schedules/
GET /api/schedules/?ordering=weekday
```

### Расписание по этажу

```
GET /api/schedules/by_floor/?floor=2

Response:
{
  "floor": 2,
  "schedules": [
    {
      "id": 1,
      "staff": 1,
      "staff_name": "Петрова Мария",
      "floor": 2,
      "weekday": 1,
      "weekday_display": "Понедельник"
    }
  ]
}
```

### Расписание по дню недели

```
GET /api/schedules/by_weekday/?weekday=1

Response:
{
  "weekday": 1,
  "schedules": [...]
}
```

### Создание

```
POST /api/schedules/
Authorization: Token xxx

{
  "staff": 1,
  "floor": 2,
  "weekday": 1
}
```

### Обновление

```
PUT /api/schedules/{id}/
Authorization: Token xxx

{
  "staff": 2,
  "floor": 2,
  "weekday": 1
}
```

### Удаление

```
DELETE /api/schedules/{id}/
Authorization: Token xxx
```

## Модель данных

```javascript
{
  id: 1,
  staff: 1,
  staff_name: "Петрова Мария Ивановна",
  floor: 2,
  weekday: 1,
  weekday_display: "Понедельник"
}
```

## Связь с гостями

На странице детальной информации о госте можно узнать, кто убирает его номер в определённый день недели.

Запрос:
```
GET /api/guests/{id}/cleaning_staff/?weekday=1
```

Логика:
1. Определяется этаж номера гостя
2. Находятся все расписания для этого этажа и дня недели
3. Возвращаются только активные служащие

## Пример использования

```javascript
import { schedulesAPI } from '@/api'

// Получение всех расписаний
const response = await schedulesAPI.getAll()
const schedules = response.data.results

// Фильтр по этажу
const floor2 = await schedulesAPI.getByFloor(2)

// Фильтр по дню недели
const monday = await schedulesAPI.getByWeekday(1)

// Создание расписания
await schedulesAPI.create({
  staff: 1,
  floor: 2,
  weekday: 1
})
```
