# Интерфейс управления номерами

## Описание

Модуль управления номерами гостиницы позволяет просматривать, создавать, редактировать и удалять номера.

## Список номеров

**Путь:** `/rooms`

**Компонент:** `RoomsView.vue`

### Функционал

- Просмотр всех номеров в виде карточек
- Фильтрация по типу номера
- Поиск по номеру и телефону
- Фильтр "Только свободные"
- CRUD операции (для авторизованных пользователей)

### Карточка номера

Каждая карточка отображает:

- Номер комнаты
- Статус (свободен/занят)
- Тип номера (одноместный/двухместный/трехместный)
- Этаж
- Телефон
- Стоимость за сутки

### Фильтры

| Фильтр | Тип | Описание |
|--------|-----|----------|
| Поиск | text | По номеру и телефону |
| Тип номера | select | single/double/triple |
| Только свободные | toggle | Фильтр по доступности |

### Действия

- **Подробнее** — переход на страницу номера
- **Редактировать** — открытие формы редактирования
- **Удалить** — удаление с подтверждением

## Детальная страница номера

**Путь:** `/rooms/:id`

**Компонент:** `RoomDetailView.vue`

### Информация о номере

- Номер и статус
- Тип номера
- Этаж
- Телефон
- Стоимость

### История гостей

Позволяет просмотреть гостей, проживавших в номере:

- Фильтрация по датам
- Список с ФИО и периодом проживания
- Переход к карточке гостя

## Форма создания/редактирования

### Поля

| Поле | Тип | Валидация |
|------|-----|-----------|
| Номер | text | Обязательное |
| Тип номера | select | Обязательное |
| Этаж | number | Обязательное, >= 1 |
| Телефон | text | Обязательное |
| Стоимость за сутки | number | Обязательное, >= 0 |

### Типы номеров

```javascript
const roomTypes = [
  { value: 'single', text: 'Одноместный' },
  { value: 'double', text: 'Двухместный' },
  { value: 'triple', text: 'Трехместный' },
]
```

## API endpoints

### Получение списка

```
GET /api/rooms/
GET /api/rooms/?search=101
GET /api/rooms/?ordering=price_per_day
```

### Получение одного номера

```
GET /api/rooms/{id}/
```

### Свободные номера

```
GET /api/rooms/available/

Response:
{
  "count": 5,
  "rooms": [...]
}
```

### История гостей

```
GET /api/rooms/{id}/guests_history/
GET /api/rooms/{id}/guests_history/?start_date=2024-01-01&end_date=2024-03-31

Response:
{
  "room": {...},
  "guests": [...],
  "count": 10
}
```

### Создание

```
POST /api/rooms/
Authorization: Token xxx

{
  "number": "101",
  "room_type": "single",
  "floor": 1,
  "phone": "+7-999-123-45-67",
  "price_per_day": 2500
}
```

### Обновление

```
PUT /api/rooms/{id}/
Authorization: Token xxx

{
  "number": "101",
  "room_type": "double",
  "floor": 1,
  "phone": "+7-999-123-45-67",
  "price_per_day": 3500
}
```

### Удаление

```
DELETE /api/rooms/{id}/
Authorization: Token xxx
```

## Пример использования

```javascript
import { roomsAPI } from '@/api'

// Загрузка всех номеров
const response = await roomsAPI.getAll()
const rooms = response.data.results

// Получение свободных
const available = await roomsAPI.getAvailable()
console.log(available.data.rooms)

// Создание номера
await roomsAPI.create({
  number: '102',
  room_type: 'double',
  floor: 1,
  phone: '123-45-67',
  price_per_day: 3000
})
```
