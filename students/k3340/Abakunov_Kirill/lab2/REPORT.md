# Отчет по лабораторной работе №2

**Дисциплина:** Web-программирование  
**Тема:** Реализация простого сайта средствами Django  
**Вариант:** Список отелей (вариант 1)

## 1. Описание варианта

Реализован веб-сервис для управления системой бронирования отелей со следующими возможностями:

- Учет информации об отелях: название, владелец, адрес, описание
- Учет типов номеров: стоимость, вместимость, удобства
- Регистрация и аутентификация пользователей
- Резервирование номеров с возможностью редактирования и удаления
- Система отзывов с рейтингами (1-10) и периодом проживания
- Административные функции заселения/выселения гостей
- Таблица постояльцев за последний месяц

## 2. Модели данных

### Hotel (Отель)
```python
- name: CharField - название отеля
- owner: CharField - владелец
- address: TextField - адрес
- description: TextField - описание
```

### RoomType (Тип номера)
```python
- hotel: ForeignKey(Hotel) - связь с отелем
- name: CharField - тип номера
- price: DecimalField - стоимость за сутки
- capacity: IntegerField - вместимость
- amenities: JSONField - список удобств
- available_count: IntegerField - количество доступных номеров
```

### Reservation (Резервирование)
```python
- user: ForeignKey(User) - пользователь
- room_type: ForeignKey(RoomType) - тип номера
- check_in_date: DateField - дата заезда
- check_out_date: DateField - дата выезда
- status: CharField - статус (pending, confirmed, checked_in, checked_out, cancelled)
- created_at: DateTimeField - дата создания
```

### Review (Отзыв)
```python
- user: ForeignKey(User) - пользователь
- room_type: ForeignKey(RoomType) - тип номера
- rating: IntegerField - рейтинг (1-10)
- comment: TextField - текст комментария
- stay_period_start: DateField - начало проживания
- stay_period_end: DateField - конец проживания
- created_at: DateTimeField - дата создания
```

## 3. Реализованный функционал

### 3.1. Для пользователей

**Регистрация:**
- URL: `/register/`
- Форма с полями: логин, email, имя, фамилия, пароль
- Автоматический вход после регистрации

**Просмотр отелей и номеров:**
- Главная страница `/` - список всех отелей
- Детальная страница отеля `/hotel/<id>/` - информация об отеле и его номерах
- Детальная страница номера `/room/<id>/` - подробная информация, отзывы, средний рейтинг

**Резервирование:**
- URL: `/room/<id>/reserve/`
- Выбор дат заезда/выезда
- Валидация: дата выезда должна быть позже заезда, даты не в прошлом
- Автоматический расчет стоимости проживания

**Управление резервированиями:**
- URL: `/reservations/` - список своих резервирований
- Редактирование `/reservation/<id>/edit/` - только для статуса "pending"
- Удаление `/reservation/<id>/delete/` - только для статуса "pending"

**Отзывы:**
- URL: `/room/<id>/review/`
- Форма: рейтинг (1-10), комментарий, период проживания
- Отзывы отображаются на странице номера

**Таблица постояльцев:**
- URL: `/guests/`
- Отображение гостей за последние 30 дней
- Группировка по отелям
- Информация: ФИО, email, тип номера, даты, статус, стоимость

### 3.2. Для администраторов

**Django Admin Panel (`/admin/`):**

1. **Управление отелями** - добавление, редактирование, удаление
2. **Управление типами номеров** - настройка цен, вместимости, удобств
3. **Управление резервированиями:**
   - Просмотр всех резервирований
   - Фильтрация по статусу и датам
   - Массовые действия: "Заселить выбранных гостей", "Выселить выбранных гостей"
   - Изменение статуса резервирования вручную
4. **Управление отзывами** - модерация отзывов

## 4. Интерфейсы системы

### 4.1. Главная страница
![Главная страница - список отелей с карточками]

Карточки отелей с информацией:
- Название и владелец
- Адрес
- Краткое описание
- Кнопка "Подробнее"

### 4.2. Страница отеля
![Детальная информация об отеле и доступных номерах]

Содержит:
- Полное описание отеля
- Карточки типов номеров с ценами и вместимостью
- Список удобств
- Средний рейтинг
- Кнопки "Подробнее" и "Забронировать"

### 4.3. Страница номера
![Детальная информация о номере и отзывы]

Содержит:
- Полная информация о номере
- Средний рейтинг
- Список всех отзывов с рейтингами
- Кнопки "Забронировать" и "Написать отзыв"

### 4.4. Форма резервирования
![Форма бронирования с выбором дат]

- Информация о выбранном номере
- Поля для выбора дат заезда и выезда
- Валидация дат
- Кнопки "Забронировать" и "Отмена"

### 4.5. Мои резервирования
![Таблица резервирований пользователя]

Таблица со столбцами:
- Отель
- Тип номера
- Даты заезда/выезда
- Стоимость
- Статус (с цветными индикаторами)
- Действия (изменить/удалить для pending)

### 4.6. Таблица постояльцев
![Список гостей за последний месяц]

Группировка по отелям, для каждого:
- ФИО постояльца
- Email
- Тип номера
- Даты проживания
- Статус (заселен/выселен)
- Стоимость

### 4.7. Админ-панель Django
![Интерфейс администрирования]

- Список всех сущностей (отели, номера, резервирования, отзывы)
- Фильтры и поиск
- Массовые действия для заселения/выселения
- Редактирование записей

## 5. Технологии

- **Backend:** Django 6.0, Python 3.13
- **Frontend:** HTML5, Bootstrap 5, CSS3
- **База данных:** SQLite3
- **Дополнительно:** Pillow (для работы с изображениями)

## 6. Запуск проекта

```bash
# Создание виртуального окружения
python3 -m venv venv
source venv/bin/activate

# Установка зависимостей
pip install -r requirements.txt

# Применение миграций
python manage.py makemigrations
python manage.py migrate

# Создание суперпользователя
python manage.py createsuperuser

# Запуск сервера
python manage.py runserver
```

Доступ:
- Сайт: http://127.0.0.1:8000/
- Админ-панель: http://127.0.0.1:8000/admin/

## 7. Тестовые данные

Для демонстрации функционала реализована автоматическая загрузка тестовых данных при первом запуске:

- **4 отеля** с полными описаниями и адресами
- **11 типов номеров** с различными ценами, вместимостью и удобствами
- **3 тестовых пользователя** для демонстрации функционала
- **5 резервирований** с разными статусами (pending, confirmed, checked_in, checked_out)
- **6 отзывов** с рейтингами от 7 до 10 и реальными комментариями

Данные загружаются автоматически при первом запуске Docker Compose, если база данных пустая. Это позволяет сразу увидеть работу системы без необходимости ручного заполнения данных.

## 8. Выводы

В ходе лабораторной работы был реализован полнофункциональный веб-сервис для управления системой бронирования отелей с использованием Django framework. Реализованы все требования варианта:

✅ Регистрация пользователей  
✅ Просмотр и резервирование номеров с редактированием и удалением  
✅ Система отзывов с рейтингами и периодами проживания  
✅ Административные функции заселения/выселения через Django Admin  
✅ Таблица постояльцев за последний месяц  
✅ Автоматическая загрузка тестовых данных для демонстрации  

Система имеет современный пользовательский интерфейс на базе Bootstrap 5, валидацию данных, разграничение прав доступа, удобную административную панель и полностью настроена для работы с PostgreSQL в Docker Compose.
